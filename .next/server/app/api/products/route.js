"use strict";(()=>{var e={};e.id=684,e.ids=[684],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6113:e=>{e.exports=require("crypto")},7147:e=>{e.exports=require("fs")},2254:e=>{e.exports=require("node:buffer")},6005:e=>{e.exports=require("node:crypto")},7261:e=>{e.exports=require("node:util")},1017:e=>{e.exports=require("path")},4996:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>g,patchFetch:()=>h,requestAsyncStorage:()=>S,routeModule:()=>p,serverHooks:()=>y,staticGenerationAsyncStorage:()=>f});var n={};r.r(n),r.d(n,{GET:()=>l,POST:()=>d});var i=r(9303),s=r(8716),o=r(670),u=r(7070),a=r(8569),c=r(6982);async function l(){try{let e=(0,a.Dg)();return u.NextResponse.json({success:!0,data:e})}catch(e){return u.NextResponse.json({success:!1,error:"Failed to fetch products"},{status:500})}}async function d(e){let t=await (0,c.k)(e);if(t)return t;try{let t=await e.json(),r=(0,a.GD)(t.name),n=(0,a.ry)({name:t.name,slug:r,shortDescription:t.shortDescription,longDescription:t.longDescription,dimensions:t.dimensions,features:t.features||[],priceChild:parseFloat(t.priceChild),priceAdult:parseFloat(t.priceAdult),images:t.images||[],inStock:!1!==t.inStock});return u.NextResponse.json({success:!0,data:n})}catch(e){return console.error("Error creating product:",e),u.NextResponse.json({success:!1,error:"Failed to create product"},{status:500})}}let p=new i.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/products/route",pathname:"/api/products",filename:"route",bundlePath:"app/api/products/route"},resolvedPagePath:"/Users/baskoerhuis/jelte3D/app/api/products/route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:S,staticGenerationAsyncStorage:f,serverHooks:y}=p,g="/api/products/route";function h(){return(0,o.patchFetch)({serverHooks:y,staticGenerationAsyncStorage:f})}},6982:(e,t,r)=>{r.d(t,{k:()=>o});var n=r(7070),i=r(9178);async function s(e){let t=e.cookies.get("admin_token")?.value;return!!t&&null!==await (0,i.WX)(t)}async function o(e){return await s(e)?null:n.NextResponse.json({success:!1,error:"Unauthorized"},{status:401})}},9178:(e,t,r)=>{r.d(t,{T7:()=>d,V3:()=>a,WX:()=>c,xH:()=>p});var n=r(6091),i=r(6176),s=r(2023),o=r.n(s);let u=new TextEncoder().encode(process.env.JWT_SECRET||"your-secret-key-min-32-characters-long");async function a(e){return await new n.N(e).setProtectedHeader({alg:"HS256"}).setExpirationTime("24h").setIssuedAt().sign(u)}async function c(e){try{return(await (0,i._)(e,u)).payload}catch(e){return null}}async function l(e,t){return o().compare(e,t)}function d(){let e=process.env.ADMIN_PASSWORD_HASH||"";return process.env.ADMIN_PASSWORD_HASH_BASE64&&(e=Buffer.from(process.env.ADMIN_PASSWORD_HASH_BASE64,"base64").toString("utf-8")),e||(e="$2a$10$YourDefaultHashHere"),{username:process.env.ADMIN_USERNAME||"admin",passwordHash:e}}async function p(e,t){let r=d();return e===r.username&&l(t,r.passwordHash)}},8569:(e,t,r)=>{r.d(t,{Dg:()=>d,Fn:()=>w,GD:()=>D,Ir:()=>y,gk:()=>p,kK:()=>m,nM:()=>f,ry:()=>S,tS:()=>h,vR:()=>g,vX:()=>x});var n=r(7147),i=r.n(n),s=r(1017),o=r.n(s);let u=o().join(process.cwd(),"data"),a=o().join(u,"products.json"),c=o().join(u,"gallery.json");function l(){i().existsSync(u)||i().mkdirSync(u,{recursive:!0}),i().existsSync(a)||i().writeFileSync(a,JSON.stringify([])),i().existsSync(c)||i().writeFileSync(c,JSON.stringify([]))}function d(){l();try{let e=i().readFileSync(a,"utf-8");return JSON.parse(e)}catch(e){return[]}}function p(e){return d().find(t=>t.id===e)||null}function S(e){let t=d(),r={...e,id:A(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return t.push(r),i().writeFileSync(a,JSON.stringify(t,null,2)),r}function f(e,t){let r=d(),n=r.findIndex(t=>t.id===e);return -1===n?null:(r[n]={...r[n],...t,id:r[n].id,createdAt:r[n].createdAt,updatedAt:new Date().toISOString()},i().writeFileSync(a,JSON.stringify(r,null,2)),r[n])}function y(e){let t=d(),r=t.filter(t=>t.id!==e);return r.length!==t.length&&(i().writeFileSync(a,JSON.stringify(r,null,2)),!0)}function g(){l();try{let e=i().readFileSync(c,"utf-8");return JSON.parse(e)}catch(e){return[]}}function h(e){return g().find(t=>t.id===e)||null}function m(e){let t=g(),r={...e,id:A(),uploadedAt:new Date().toISOString()};return t.push(r),i().writeFileSync(c,JSON.stringify(t,null,2)),r}function w(e,t){let r=g(),n=r.findIndex(t=>t.id===e);return -1===n?null:(r[n]={...r[n],...t,id:r[n].id,uploadedAt:r[n].uploadedAt},i().writeFileSync(c,JSON.stringify(r,null,2)),r[n])}function x(e){let t=g(),r=t.filter(t=>t.id!==e);return r.length!==t.length&&(i().writeFileSync(c,JSON.stringify(r,null,2)),!0)}function A(){return Date.now().toString(36)+Math.random().toString(36).substring(2)}function D(e){return e.toLowerCase().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim()}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[948,972,391],()=>r(4996));module.exports=n})();